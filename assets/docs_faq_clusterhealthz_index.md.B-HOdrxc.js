import{_ as e,c as a,o as s,a2 as o}from"./chunks/framework.Bfq10Vlj.js";const p=JSON.parse('{"title":"How can you get the status of a shoot API server?","description":"","frontmatter":{"github_repo":"https://github.com/gardener/documentation","github_subdir":"website/documentation/faq","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/faq/clusterhealthz.md","to":"clusterhealthz.md"},"title":"How can you get the status of a shoot API server?","prev":false,"next":false},"headers":[],"relativePath":"docs/faq/clusterhealthz/index.md","filePath":"docs/faq/clusterhealthz.md","lastUpdated":null}'),i={name:"docs/faq/clusterhealthz/index.md"};function h(n,t,r,l,c,d){return s(),a("div",null,t[0]||(t[0]=[o(`<h1 id="how-can-you-get-the-status-of-a-shoot-api-server" tabindex="-1">How can you get the status of a shoot API server? <a class="header-anchor" href="#how-can-you-get-the-status-of-a-shoot-api-server" aria-label="Permalink to &quot;How can you get the status of a shoot API server?&quot;">â€‹</a></h1><p>There are two ways to get the health information of a shoot API server.</p><ul><li>Try to reach the public endpoint of the shoot API server via <code>&quot;https://api.&lt;shoot-name&gt;.&lt;project-name&gt;.shoot.&lt;canary|office|live&gt;.k8s-hana.ondemand.com/healthz&quot;</code></li></ul><p>The endpoint is secured, therefore you need to authenticate via basic auth or client cert. Both are available in the admin kubeconfig of the shoot cluster. Note that with those credentials you have full (admin) access to the cluster, therefore it is highly recommended to create custom credentials with some RBAC rules and bindings which only allow access to the /healthz endpoint.</p><ul><li>Fetch the shoot resource of your cluster via the programmatic API of the Gardener and get the availability information from the status. You need a kubeconfig for the Garden cluster, which you can get via the Gardener dashboard. Then you could fetch your shoot resource and query for the availability information via:</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shoot</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shoot-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.status.conditions[] | select(.type==&quot;APIServerAvailable&quot;)&#39;</span></span></code></pre></div><p>The availability information in the second scenario is collected by the Gardener. If you want to collect the information independently from Gardener, you should choose the first scenario.</p><p>If you want to archive a simple pull monitor in the AvS for a shoot cluster, you also need to use the first scenario, because with it you have a stable endpoint for the API server which you can query.</p>`,8)]))}const f=e(i,[["render",h]]);export{p as __pageData,f as default};

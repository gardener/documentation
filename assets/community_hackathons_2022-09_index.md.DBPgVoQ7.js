import{_ as o,c as t,o as r,a2 as a}from"./chunks/framework.Bfq10Vlj.js";const i="/assets/2022-09.n0f-R5xG.jpg",g=JSON.parse('{"title":"September 2022","description":"","frontmatter":{"github_repo":"https://github.com/gardener/documentation","github_subdir":"website/community/hackathons","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/community/hackathons/2022-09.md","to":"2022-09.md"},"title":"September 2022","weight":-202209,"prev":false,"next":false},"headers":[],"relativePath":"community/hackathons/2022-09/index.md","filePath":"community/hackathons/2022-09.md","lastUpdated":null}'),s={name:"community/hackathons/2022-09/index.md"};function n(l,e,c,d,h,u){return r(),t("div",null,e[0]||(e[0]=[a('<h1 id="hack-the-garden-09-2022-wrap-up" tabindex="-1">Hack The Garden 09/2022 Wrap Up <a class="header-anchor" href="#hack-the-garden-09-2022-wrap-up" aria-label="Permalink to &quot;Hack The Garden 09/2022 Wrap Up&quot;">‚Äã</a></h1><ul><li>üóìÔ∏è <strong>Date:</strong> 26.09.2022 ‚Äì 30.09.2022</li><li>üìç <strong>Location:</strong> <a href="https://www.wuerttembergerhaus.de/" target="_blank" rel="noreferrer">W√ºrttemberger Haus, Hirschegg, √ñsterreich</a></li><li>üë§ <strong>Organizer:</strong> <a href="https://www.sap.com/" target="_blank" rel="noreferrer">SAP</a></li><li>üìò <strong>Topics:</strong> /</li></ul><p><img src="'+i+'" alt="Group picture"></p><h2 id="ipv6" tabindex="-1">IPv6 <a class="header-anchor" href="#ipv6" aria-label="Permalink to &quot;IPv6&quot;">‚Äã</a></h2><ul><li>There is an open PR which adapts some assumptions about the IPv4 CIDRs in <code>gardener/gardener</code> (changes are rather minimal).</li><li>Shoot creation currently stops at 83%.</li><li><code>DNSRecord</code> extension needs to be adapted to support <code>AAAA</code> records.</li><li>Focus was on the local setup only for now (which comes with its own issues). <strong>As a follow-up, we want to try the same with real infrastructures</strong>.</li><li><strong>Everybody is invited to try the IPv6 setup at home (where you have IPv6 internet access) and provide feedback in the open PR.</strong></li><li>With IPv6, the network CIDRs cannot be defined before shoot cretion (which is different compared to how it works with IPv4 today). <strong>We need to discuss the target picture.</strong></li></ul><h2 id="canary-rollout" tabindex="-1">Canary Rollout <a class="header-anchor" href="#canary-rollout" aria-label="Permalink to &quot;Canary Rollout&quot;">‚Äã</a></h2><ul><li>There is a PoC which marks <code>Seed</code>s as canaries and works with both extensions and new gardenlet versions.</li><li>A new freeze controller would stop gardenlets from continuing reconciling <code>Shoot</code>s in case too many clusters became unhealthy after the update.</li><li>The <code>ManagedSeed</code> controller now also uses <code>ControllerDeployment</code>s for rolling out gardenlets.</li><li>There are still some open questions, e.g. &quot;how to validate provider extensions&quot; (given that a seed cluster is typically only responsible for one provider) and &quot;how to determine the canary seeds&quot;.</li><li><strong>We have to discuss the approach and solve the open questions before writing up a GEP</strong>.</li></ul><h2 id="registry-cache-extension" tabindex="-1">Registry Cache Extension <a class="header-anchor" href="#registry-cache-extension" aria-label="Permalink to &quot;Registry Cache Extension&quot;">‚Äã</a></h2><ul><li>There is a new controller (<code>gardener/gardener-extension-registry-cache</code>) for <code>Extension</code> resources which deploys the Docker registries (one per upstream repository) into the shoot cluster.</li><li>The <code>containerd</code> configuration for the mirrors is stored in a <code>ConfigMap</code> and picked up by a <code>DaemonSet</code> from there which applies it and restarts the <code>containerd.</code></li><li>The <code>DaemonSet</code> pods are quite privileged and <strong>we need to discuss how to improve security concerns here</strong> (don&#39;t use it in production for now).</li><li><strong>Some unit and integration tests (and docs) are missing and have to be added</strong>, however Prow is already connected to it.</li><li>There is an issue with <code>containerd</code> which only allows mirrors to be configured from one file.</li><li>There was also a bug in <code>gardener/gardener</code> which prevented additional <code>containerd</code> imports from working properly.</li><li>Another issue in <code>gardener/gardener</code> was found regarding removing the extension from shoot clusters (still needs to be investigated).</li><li>Potentially, we should refactor the current implementation to rely on <code>OperatingSystemConfig</code> webhooks.</li></ul><h2 id="access-control-for-shoot-clusters" tabindex="-1">Access Control For Shoot Clusters <a class="header-anchor" href="#access-control-for-shoot-clusters" aria-label="Permalink to &quot;Access Control For Shoot Clusters&quot;">‚Äã</a></h2><ul><li>The open PR from Gerrit in <code>gardener/gardener</code> was closed in favor of an extension developed by StackIT.</li><li><strong>It needs to be adapted to a new approach using <code>EnvoyFilter</code>s instead of <code>AuthorizationPolicy</code>s</strong> (otherwise, we would risk <code>kube-apiserver</code> outages).</li><li>End-users should not be bothered with specifying the &quot;right&quot; IPs (source IPs vs. proxy protocol). For this, <strong>the provider extension need to be adapted to make this convenient for the users.</strong> (This is only for convenience - the extension can operate on its own).</li><li>The 23T colleagues created a new GitHub organization called <code>gardener-community</code> which might be a good place to host this new extension.</li></ul><h2 id="cilium-support-for-metal-stack" tabindex="-1">Cilium Support For Metal Stack <a class="header-anchor" href="#cilium-support-for-metal-stack" aria-label="Permalink to &quot;Cilium Support For Metal Stack&quot;">‚Äã</a></h2><ul><li>The Cilium extension was enhanced to support some more configuration options which make Cilium now possible on Metal Stack.</li><li>In addition, Cilium was tested successfully with <code>provider-local</code> (works out of the box).</li></ul><h2 id="kubelet-server-certificate" tabindex="-1">Kubelet Server Certificate <a class="header-anchor" href="#kubelet-server-certificate" aria-label="Permalink to &quot;Kubelet Server Certificate&quot;">‚Äã</a></h2><ul><li>The kubelet was still using a self-signed server certificate (valid for <code>1y</code>) and was now adapted to create <code>CertificateSigningRequest</code> resources (same process compared to what it does to retrieve its client certificate).</li><li>There is a new controller in <code>gardener-resource-manager</code> which approves such CSRs so that <code>kube-controller-manager</code> can issue the certificate.</li><li>With this, the server certificate is only valid for <code>30d</code> and rotated regularly.</li><li>Documentation and tests are still missing and need to be adapted.</li><li>OpenShift follows a similar approach (they have their own CSR approver controller).</li></ul><h2 id="replacement-of-the-last-remaining-shell-script-in-metal-stack" tabindex="-1">Replacement Of The Last Remaining Shell Script In Metal Stack <a class="header-anchor" href="#replacement-of-the-last-remaining-shell-script-in-metal-stack" aria-label="Permalink to &quot;Replacement Of The Last Remaining Shell Script In Metal Stack&quot;">‚Äã</a></h2><ul><li>Awesome</li></ul><h2 id="resource-manager-health-check-watches" tabindex="-1">Resource Manager Health Check Watches <a class="header-anchor" href="#resource-manager-health-check-watches" aria-label="Permalink to &quot;Resource Manager Health Check Watches&quot;">‚Äã</a></h2><ul><li>Previously, the health controller was polling periodically which caused quite some delays in reporting the actual status of the world.</li><li>This prolonged various operations unnecessarily.</li><li>Now, it watches all resources it detects in the <code>status</code> of the <code>ManagedResource</code> which makes it reacting MUCH faster. üéâ</li><li>This only works for the <code>ManagedResource</code>s in the seed since we currently disable the cache for shoot clusters (however, enabling it comes with quite more memory usage, so we have to check).</li></ul>',19)]))}const m=o(s,[["render",n]]);export{g as __pageData,m as default};

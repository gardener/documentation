import{_ as t,c as r,o as a,a2 as o}from"./chunks/framework.Bfq10Vlj.js";const p=JSON.parse('{"title":"Unifying HTTP Proxy Infrastructure in Gardener","description":"","frontmatter":{"aliases":["/blog/2025/10/22/unifying-http-proxy-infrastructure-in-gardener"],"authors":[{"avatar":"https://avatars.githubusercontent.com/hown3d","login":"hown3d","name":"Lukas Hoehl"}],"github_repo":"https://github.com/gardener/documentation","github_subdir":"website/blog/2025/10","linkTitle":"Unifying HTTP Proxy Infrastructure in Gardener","newsSubtitle":"October 22, 2025","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/blog/2025/10/10-22-useunifiedhttpproxy-feature-gate.md","to":"10-22-useunifiedhttpproxy-feature-gate.md"},"publishdate":"2025-10-22","title":"Unifying HTTP Proxy Infrastructure in Gardener"},"headers":[],"relativePath":"blog/2025/10/10-22-useunifiedhttpproxy-feature-gate/index.md","filePath":"blog/2025/10/10-22-useunifiedhttpproxy-feature-gate.md","lastUpdated":null}'),n={name:"blog/2025/10/10-22-useunifiedhttpproxy-feature-gate/index.md"};function i(s,e,d,u,h,l){return a(),r("div",null,e[0]||(e[0]=[o('<h1 id="unifying-http-proxy-infrastructure-in-gardener" tabindex="-1">Unifying HTTP Proxy Infrastructure in Gardener <a class="header-anchor" href="#unifying-http-proxy-infrastructure-in-gardener" aria-label="Permalink to &quot;Unifying HTTP Proxy Infrastructure in Gardener&quot;">​</a></h1><p>Gardener is simplifying its networking infrastructure by moving towards a single, unified entrypoint for all HTTP CONNECT proxy traffic. This change, introduced as part of <a href="https://github.com/gardener/gardener/blob/master/docs/proposals/30-apiserver-proxy.md" target="_blank" rel="noreferrer">GEP-30</a>, aims to streamline configuration and reduce complexity.</p><h3 id="the-useunifiedhttpproxyport-feature-gate" tabindex="-1">The <code>UseUnifiedHTTPProxyPort</code> Feature Gate <a class="header-anchor" href="#the-useunifiedhttpproxyport-feature-gate" aria-label="Permalink to &quot;The `UseUnifiedHTTPProxyPort` Feature Gate&quot;">​</a></h3><p>The transition to this new model is managed by a new alpha feature gate, <code>UseUnifiedHTTPProxyPort</code>.</p><p>When an operator enables this feature gate, the Istio ingress gateway in the seed cluster opens a new port, <code>8443</code>, dedicated to handling all HTTP CONNECT proxy requests. For backward compatibility and to ensure a smooth transition, the legacy port <code>8132</code> remains active alongside the new one.</p><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h3><p>With the feature gate enabled, Gardener components that rely on the proxy are reconfigured:</p><ul><li>The <strong>shoot VPN client</strong> and the <strong>API server proxy</strong> are updated to send their traffic to the new unified port (<code>8443</code>).</li><li>A new, standardized HTTP header, <code>X-Gardener-Destination</code>, is now used to route the traffic, replacing the legacy <code>Reversed-VPN</code> header.</li></ul><p>These changes ensure that traffic is correctly routed through the new, unified infrastructure.</p><h3 id="tracking-adoption-and-future-steps" tabindex="-1">Tracking Adoption and Future Steps <a class="header-anchor" href="#tracking-adoption-and-future-steps" aria-label="Permalink to &quot;Tracking Adoption and Future Steps&quot;">​</a></h3><p>To safely manage the transition, Gardener now adds a new condition, <code>ShootUsesUnifiedHTTPProxyPort</code>, to the <code>Shoot</code> status. This condition is set to <code>True</code> once a cluster&#39;s components have been successfully configured to use the new port <code>8443</code>.</p><p>This tracking mechanism will allow operators to monitor the adoption of the new proxy infrastructure across all clusters. The ultimate goal is to deprecate and remove the old port <code>8132</code> in a future release, leading to a cleaner and more maintainable networking setup.</p><h3 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">​</a></h3><ul><li><a href="https://youtu.be/GArG1wh2j1o?t=1358" target="_blank" rel="noreferrer">Recording of the talk</a></li><li><a href="https://github.com/gardener/gardener/pull/13003" target="_blank" rel="noreferrer">GitHub Pull Request #13003</a></li><li><a href="https://github.com/gardener/gardener/blob/master/docs/proposals/30-apiserver-proxy.md" target="_blank" rel="noreferrer">GEP-30: Unifying the HTTP-Proxy Infrastructure</a></li></ul>',14)]))}const f=t(n,[["render",i]]);export{p as __pageData,f as default};

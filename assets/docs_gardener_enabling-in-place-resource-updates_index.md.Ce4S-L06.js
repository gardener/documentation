import{_ as a,c as t,o as r,a2 as o}from"./chunks/framework.Bfq10Vlj.js";const u=JSON.parse('{"title":"Enabling In-Place Pod Resource Updates","description":"Enablement of in-place Pod resource updates within Vertical Pod Autoscaler deployments","frontmatter":{"categories":["Operators"],"description":"Enablement of in-place Pod resource updates within Vertical Pod Autoscaler deployments","github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/operations","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/enabling-in-place-resource-updates.md","to":"enabling-in-place-resource-updates.md"},"persona":"Operators","title":"Enabling In-Place Pod Resource Updates","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/enabling-in-place-resource-updates/index.md","filePath":"docs/gardener/enabling-in-place-resource-updates.md","lastUpdated":null}'),s={name:"docs/gardener/enabling-in-place-resource-updates/index.md"};function n(i,e,d,l,c,p){return r(),t("div",null,e[0]||(e[0]=[o(`<h1 id="enabling-in-place-updates-of-pod-resources" tabindex="-1">Enabling In-Place Updates of Pod Resources <a class="header-anchor" href="#enabling-in-place-updates-of-pod-resources" aria-label="Permalink to &quot;Enabling In-Place Updates of Pod Resources&quot;">​</a></h1><p>This is a short guide covering the adoption mechanism of <code>in-place</code> Pod resource updates in Gardener <a href="https://github.com/kubernetes/autoscaler" target="_blank" rel="noreferrer">Vertical Pod Autoscaler</a> deployments.</p><h2 id="compatibility" tabindex="-1">Compatibility <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;Compatibility&quot;">​</a></h2><p>Refer to the <a href="https://github.com/gardener/gardener/blob/master/docs/operations/in-place-resource-updates.md" target="_blank" rel="noreferrer">in-place resource updates</a> guide for details on Kubernetes clusters compatibility, <a href="https://github.com/kubernetes/autoscaler" target="_blank" rel="noreferrer">Vertical Pod Autoscaler</a> feature gate definition and availability.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><p>Gardener provides a dedicated <a href="https://github.com/gardener/gardener/blob/master/concepts/resource-manager.md" target="_blank" rel="noreferrer">resource manager</a> <a href="https://github.com/gardener/gardener/blob/master/concepts/resource-manager.md#webhooks" target="_blank" rel="noreferrer">webhook</a> capable of <em>mutating</em> VerticalPodAutoscaler resources, configured with <a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/docs/quickstart.md#contents" target="_blank" rel="noreferrer">update mode</a> <code>Auto</code> or <code>Recreate</code>, with the <code>in-place</code> updates enabling <code>InPlaceOrRecreate</code>. Available for deployment with both <a href="https://github.com/gardener/gardener/blob/master/concepts/gardenlet.md" target="_blank" rel="noreferrer">gardenlet</a> and <a href="https://github.com/gardener/gardener/blob/master/concepts/operator.md" target="_blank" rel="noreferrer">gardener operator</a>, the <em>mutating</em> webhook can be activated with the following feature gate, listed within the respective component manifest. Refer to the Gardener <a href="https://github.com/gardener/gardener/blob/master/deployment/feature_gates.md" target="_blank" rel="noreferrer">feature gates</a> page for additional details:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>VPAInPlaceUpdates</span></span></code></pre></div><p>To keep a VerticalPodAutoscaler resource out of the <em>mutating</em> webhook scope, add the following <code>skip</code> label, indicating that the resource should preserve its current configuration and <strong>not</strong> get updated:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>vpa-in-place-updates.resources.gardener.cloud/skip</span></span></code></pre></div><h3 id="gardenlet" tabindex="-1">gardenlet <a class="header-anchor" href="#gardenlet" aria-label="Permalink to &quot;gardenlet&quot;">​</a></h3><p>To enable the <em>mutating</em> <a href="https://github.com/gardener/gardener/blob/master/concepts/resource-manager.md" target="_blank" rel="noreferrer">resource manager</a> webhook, the <code>VPAInPlaceUpdates</code> feature gate must be set to <code>true</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">featureGates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  VPAInPlaceUpdates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>Refer to the <code>gardenlet</code> component configuration <a href="https://github.com/gardener/gardener/blob/master/example/20-componentconfig-gardenlet.yaml" target="_blank" rel="noreferrer">manifest</a> for an overview.</p><h4 id="shoot" tabindex="-1">Shoot <a class="header-anchor" href="#shoot" aria-label="Permalink to &quot;Shoot&quot;">​</a></h4><blockquote><p>When deployed in a <code>Shoot</code> cluster, the <em>mutating</em> webhook targets <code>vertical pod autoscaler</code> resources <strong>inside</strong> the <code>kube-system</code> and <code>kubernetes-dashboard</code> namespaces.</p></blockquote><p>To make use of the <em>mutating</em> resource manager webhook, the <code>Shoot</code>&#39;s <a href="https://github.com/kubernetes/autoscaler" target="_blank" rel="noreferrer">Vertical Pod Autoscaler</a> deployment must <strong>not have</strong> the <code>InPlaceOrRecreate</code> feature gate <strong>disabled</strong>. Follow the <a href="https://github.com/gardener/gardener/blob/master/docs/operations/in-place-resource-updates.md#shoot" target="_blank" rel="noreferrer">in-place resource updates</a> guide for more details about the Vertical Pod Autoscaler components setup.</p><h4 id="seed" tabindex="-1">Seed <a class="header-anchor" href="#seed" aria-label="Permalink to &quot;Seed&quot;">​</a></h4><blockquote><p>When deployed in a <code>Seed</code> cluster, the <em>mutating</em> webhook targets <code>vertical pod autoscaler</code> resources <strong>outside</strong> the <code>kube-system</code> and <code>kubernetes-dashboard</code> namespaces.</p></blockquote><p>To make use of the <em>mutating</em> resource manager webhook, the <code>Seed</code>&#39;s <a href="https://github.com/kubernetes/autoscaler" target="_blank" rel="noreferrer">Vertical Pod Autoscaler</a> deployment must <strong>not have</strong> the <code>InPlaceOrRecreate</code> feature gate <strong>disabled</strong>. Follow the <a href="https://github.com/gardener/gardener/blob/master/docs/operations/in-place-resource-updates.md#seed" target="_blank" rel="noreferrer">in-place resource updates</a> guide for more details about the Vertical Pod Autoscaler components setup.</p><h3 id="gardener-operator" tabindex="-1">Gardener Operator <a class="header-anchor" href="#gardener-operator" aria-label="Permalink to &quot;Gardener Operator&quot;">​</a></h3><p>To enable the <em>mutating</em> <a href="https://github.com/gardener/gardener/blob/master/concepts/resource-manager.md" target="_blank" rel="noreferrer">resource manager</a> webhook, the <code>VPAInPlaceUpdates</code> feature gate must be set to <code>true</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">featureGates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  VPAInPlaceUpdates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>Refer to the <code>operator</code> component configuration <a href="https://github.com/gardener/gardener/blob/master/example/operator/10-componentconfig.yaml" target="_blank" rel="noreferrer">manifest</a> for an overview.</p><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><ul><li><a href="https://github.com/gardener/gardener/blob/master/deployment/feature_gates.md" target="_blank" rel="noreferrer">Gardener Feature Gates</a></li><li><a href="https://github.com/kubernetes/autoscaler/blob/master/vertical-pod-autoscaler/docs/features.md#in-place-updates-inplaceorrecreate" target="_blank" rel="noreferrer">Vertical Pod Autoscaling In-Place Updates</a></li><li><a href="https://github.com/gardener/gardener/blob/master/docs/operations/in-place-resource-updates.md" target="_blank" rel="noreferrer">Vertical Pod Autoscaling In-Place Updates Guide</a></li></ul>`,25)]))}const g=a(s,[["render",n]]);export{u as __pageData,g as default};

import{_ as e,c as i,o as a,a2 as n}from"./chunks/framework.Bfq10Vlj.js";const k=JSON.parse('{"title":"NamespacedCloudProfiles","description":"","frontmatter":{"aliases":["/docs/gardener/namespaced-cloud-profiles/"],"github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/usage/project","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/project/namespaced-cloud-profiles.md","to":"namespaced-cloud-profiles.md"},"persona":"Users","title":"NamespacedCloudProfiles","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/project/namespaced-cloud-profiles/index.md","filePath":"docs/gardener/project/namespaced-cloud-profiles.md","lastUpdated":null}'),t={name:"docs/gardener/project/namespaced-cloud-profiles/index.md"};function o(l,s,r,d,p,h){return a(),i("div",null,s[0]||(s[0]=[n(`<h1 id="namespacedcloudprofiles" tabindex="-1"><code>NamespacedCloudProfile</code>s <a class="header-anchor" href="#namespacedcloudprofiles" aria-label="Permalink to &quot;\`NamespacedCloudProfile\`s&quot;">​</a></h1><p><code>NamespacedCloudProfile</code>s are resources in Gardener that allow project-level customization of <code>CloudProfile</code>s. They enable project administrators to create and manage cloud profiles specific to their projects and reduce the operational burden on central Gardener operators. As opposed to <code>CloudProfile</code>s, <code>NamespacedCloudProfile</code>s are namespaced and thus limit configuration options for <code>Shoot</code>s, such as special machine types, to the associated project only. These profiles inherit from a parent <code>CloudProfile</code> and can override or extend certain fields while maintaining backward compatibility.</p><p>Project viewers have the permission to see <code>NamespacedCloudProfile</code>s associated with a particular project. Project administrators can generally create, edit, or delete <code>NamespacedCloudProfile</code>s but with some exceptions (see the <a href="/docs/gardener/project/namespaced-cloud-profiles/#field-modification-restrictions">restrictions</a> outlined below).</p><p>When creating or updating a <code>Shoot</code>, the cloud profile reference can be set to point to a <code>NamespacedCloudProfile</code>, allowing for more granular and project-specific configurations. The modification of a <code>Shoot</code>&#39;s cloud profile reference is restricted to switching within the same profile hierarchy, i.e. from a <code>CloudProfile</code> to a descendant <code>NamespacedCloudProfile</code>, from a <code>NamespacedCloudProfile</code> to its parent <code>CloudProfile</code> and between <code>NamespacedCloudProfile</code>s having the same <code>CloudProfile</code> parent. Changing the reference from one <code>CloudProfile</code> or descendant <code>NamespacedCloudProfile</code> to another <code>CloudProfile</code> or descendant <code>NamespacedCloudProfile</code> is not allowed.</p><p>Please see <a href="https://github.com/gardener/gardener/blob/master/example/35-namespacedcloudprofile.yaml" target="_blank" rel="noreferrer">this</a> example manifest and <a href="https://github.com/gardener/gardener/blob/master/docs/proposals/25-namespaced-cloud-profiles.md" target="_blank" rel="noreferrer">GEP-25</a> for additional information.</p><h2 id="field-modification-restrictions" tabindex="-1">Field Modification Restrictions <a class="header-anchor" href="#field-modification-restrictions" aria-label="Permalink to &quot;Field Modification Restrictions&quot;">​</a></h2><p>In order to make changes to specific fields in the <code>NamespacedCloudProfile</code>, a user must be granted custom RBAC verbs. Modifications of these fields need to be performed with caution and might require additional validation steps or accompanying changes. By default, only landscape operators have the permission to change these fields, as they are usually able to judge the implications.</p><p>Changing the following fields require the corresponding custom verbs:</p><ul><li>For changing the <code>.spec.kubernetes</code> field, the custom verb <code>modify-spec-kubernetes</code> is required.</li><li>For changing the <code>.spec.machineImages</code> field, the custom verb <code>modify-spec-machineimages</code> is required.</li><li>For changing the <code>.spec.providerConfig</code> field, the custom verb <code>modify-spec-providerconfig</code> is required.</li><li>For raising limits in <code>.spec.limits</code> field above values in the parent CloudProfile <code>.spec.limits</code>, the custom verb <code>raise-spec-limits</code> is required.</li></ul><p>The assignment of these custom verbs can be achieved by creating a <code>ClusterRole</code> and a <code>RoleBinding</code> like in the following example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">namespacedcloudprofile-kubernetes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;core.gardener.cloud&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;namespacedcloudprofiles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;modify-spec-kubernetes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rbac.authorization.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">RoleBinding</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">edit-kubernetes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">roleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  apiGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rbac.authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ClusterRole</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">namespacedcloudprofile-kubernetes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">subjects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rbac.authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">User</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">alice.doe@example.com</span></span></code></pre></div>`,11)]))}const E=e(t,[["render",o]]);export{k as __pageData,E as default};

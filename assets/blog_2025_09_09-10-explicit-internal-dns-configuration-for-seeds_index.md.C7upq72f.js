import{_ as i,c as t,o,a2 as a}from"./chunks/framework.Bfq10Vlj.js";const h=JSON.parse('{"title":"Explicit Internal DNS Configuration for Seeds","description":"","frontmatter":{"aliases":["/blog/2025/09/10/explicit-internal-dns-configuration-for-seeds"],"authors":[{"avatar":"https://avatars.githubusercontent.com/dimityrmirchev","login":"dimityrmirchev","name":"Dimitar Mirchev"}],"github_repo":"https://github.com/gardener/documentation","github_subdir":"website/blog/2025/09","linkTitle":"Explicit Internal DNS Configuration for Seeds","newsSubtitle":"September 10, 2025","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/blog/2025/09/09-10-explicit-internal-dns-configuration-for-seeds.md","to":"09-10-explicit-internal-dns-configuration-for-seeds.md"},"publishdate":"2025-09-10","title":"Explicit Internal DNS Configuration for Seeds"},"headers":[],"relativePath":"blog/2025/09/09-10-explicit-internal-dns-configuration-for-seeds/index.md","filePath":"blog/2025/09/09-10-explicit-internal-dns-configuration-for-seeds.md","lastUpdated":null}'),r={name:"blog/2025/09/09-10-explicit-internal-dns-configuration-for-seeds/index.md"};function n(s,e,d,l,c,p){return o(),t("div",null,e[0]||(e[0]=[a('<h1 id="explicit-internal-dns-configuration-for-seeds" tabindex="-1">Explicit Internal DNS Configuration for Seeds <a class="header-anchor" href="#explicit-internal-dns-configuration-for-seeds" aria-label="Permalink to &quot;Explicit Internal DNS Configuration for Seeds&quot;">​</a></h1><p>Gardener&#39;s DNS management capabilities have been enhanced to provide a more explicit, secure, and flexible method for configuring internal DNS for <code>Seed</code> clusters. This change moves away from a global, label-based secret selection to a direct configuration within the <code>Seed</code> API.</p><h3 id="a-new-api-for-per-seed-configuration" tabindex="-1">A New API for Per-Seed Configuration <a class="header-anchor" href="#a-new-api-for-per-seed-configuration" aria-label="Permalink to &quot;A New API for Per-Seed Configuration&quot;">​</a></h3><p>Previously, internal DNS settings were configured globally for an entire Gardener landscape via a single, specially labeled <code>Secret</code>. With the recent changes, the <code>Seed</code> specification has been extended with a new <code>.spec.dns.internal</code> field. This allows operators to define internal DNS settings on a per-seed basis.</p><p>The new <code>SeedDNSProviderConfig</code> object includes the following fields:</p><ul><li><code>type</code>: The DNS provider type (e.g., <code>aws-route53</code>, <code>local</code>).</li><li><code>domain</code>: The internal domain name to be used by the provider.</li><li><code>zone</code> (optional): The specific zone where DNS records are managed.</li><li><code>credentialsRef</code>: A reference to a <code>Secret</code> that holds the credentials for authenticating with the DNS provider.</li></ul><p>This new approach offers several advantages:</p><ul><li><strong>Granular Control:</strong> Operators can now configure different internal domains and credentials for each <code>Seed</code>, reducing the blast radius in case a secret is compromised. This also helps in avoiding potential rate limits from DNS providers.</li><li><strong>Explicit and Validated:</strong> By moving the configuration into an explicit API field, it becomes easier to validate and is less prone to errors than the previous implicit, label-based discovery mechanism.</li><li><strong>Future-Ready:</strong> The API is designed to support other credential types in the future, such as <code>WorkloadIdentity</code>.</li></ul><h3 id="migration-path-for-operators" tabindex="-1">Migration Path for Operators <a class="header-anchor" href="#migration-path-for-operators" aria-label="Permalink to &quot;Migration Path for Operators&quot;">​</a></h3><p>To ensure a smooth transition, Gardener provides an automatic migration path. On startup, a <code>gardenlet</code> will check if the <code>.spec.dns.internal</code> field is set for its <code>Seed</code>. If the field is empty, <code>gardenlet</code> will automatically populate it by reading the configuration from the existing globally-defined internal domain <code>Secret</code>.</p><p>However, this automatic population is a temporary measure to facilitate migration. Operators are required to adapt their <code>Seed</code> manifests and configuration templates to explicitly define the <code>.spec.dns.internal</code> block.</p><p><strong>Important:</strong> The <code>.spec.dns.internal</code> field will become a <strong>mandatory configuration</strong> after the release of Gardener <strong>v1.129.0</strong>.</p><p>This enhancement is the first step in improving DNS configuration management. A similar change is also planned for the default domain configuration in a future release.</p><hr><p><strong>For more details, you can check out the following resources:</strong></p><ul><li><a href="https://youtu.be/aUCxInp-yaA?t=1109" target="_blank" rel="noreferrer">Recording of the Talk</a></li><li><a href="https://github.com/gardener/gardener/pull/12663" target="_blank" rel="noreferrer">GitHub Pull Request #12663</a></li></ul>',16)]))}const u=i(r,[["render",n]]);export{h as __pageData,u as default};

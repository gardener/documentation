import{_ as s,c as a,o as i,a2 as n}from"./chunks/framework.Bfq10Vlj.js";const t="/assets/gardener-setup.CAJ_g2q0.png",r="/assets/extensions.D_YVzZtR.png",l="/assets/garden.DBNXonkg.png",h="/assets/gardenlet.Bk7_O8GF.png",p="/assets/managedseed.CRyGAK-A.png",m=JSON.parse('{"title":"Setup Gardener","description":"","frontmatter":{"github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/deployment","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/deployment/setup_gardener.md","to":"setup_gardener.md"},"title":"Setup Gardener","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/deployment/setup_gardener/index.md","filePath":"docs/gardener/deployment/setup_gardener.md","lastUpdated":null}'),d={name:"docs/gardener/deployment/setup_gardener/index.md"};function o(k,e,c,g,E,u){return i(),a("div",null,e[0]||(e[0]=[n('<h1 id="how-to-set-up-a-gardener-landscape" tabindex="-1">How to Set Up a Gardener Landscape <a class="header-anchor" href="#how-to-set-up-a-gardener-landscape" aria-label="Permalink to &quot;How to Set Up a Gardener Landscape&quot;">​</a></h1><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p><strong>DISCLAIMER</strong> This document outlines the building blocks used to set up a Gardener landscape. It is not meant as a comprehensive configuration guide but rather as a starting point. Setting up a landscape requires careful planning and consideration of dimensions like the number of providers, geographical distribution, and envisioned size.</p><p>To make it more tangible, some choices are made to provide examples - specifically this guide uses OpenStack as infrastructure provider, Garden Linux to run any worker nodes, and Calico as CNI. Providing working examples for all combinations of components is out of scope. For a detailed descriptions of components, please refer to the <a href="https://gardener.cloud/docs/" target="_blank" rel="noreferrer">documentation</a> and <a href="https://gardener.cloud/docs/gardener/api-reference/" target="_blank" rel="noreferrer">API reference</a>.</p></div><h2 id="target-picture" tabindex="-1">Target Picture <a class="header-anchor" href="#target-picture" aria-label="Permalink to &quot;Target Picture&quot;">​</a></h2><p>A Gardener landscape consists of several building blocks. The basis is an existing Kubernetes cluster which is referred to as <em>runtime</em> cluster. Within this cluster another Kubernetes cluster is hosted, which is referred to as <em>virtual Garden</em> cluster. It is nodeless, meaning it does not host any pods as workload. The virtual Garden cluster is the management plane for the Gardener landscape and contains resources like <code>Shoots</code>, <code>Seeds</code> and so on.</p><p>Any new Gardener landscape starts with the deployment of the Gardener Operator and the creation of a <code>garden</code> namespace on the designated runtime cluster.</p><p>With the operator in place, the <code>Garden</code> resource can be deployed. It is reconciled by the Gardener Operator, which will create the &quot;virtual&quot; Garden cluster with its <code>etcd</code>, <code>kube-apiserver</code>, <code>gardener-apiserver</code>, and so on. The API server is exposed through an Istio <code>Gateway</code> and a DNS record pointing to the <code>Gateway</code>&#39;s external IP address is created.</p><p>Once the <code>Garden</code> reports readiness, basic building blocks like <code>CloudProfile</code>s, <code>ControllerDeployment</code>s, and <code>ControllerRegistration</code>s, as well as <code>Secret</code>s granting access to DNS management for the internal domain and external default domain, are deployed to the virtual Garden cluster.</p><p>To be able to host any <code>Shoot</code>s, at least one <code>Seed</code> is required. The very first <code>Seed</code> is created via a <code>Gardenlet</code> resource (more precisely <code>gardenlets.seedmanagement.gardener.cloud</code>) deployed to the virtual Garden cluster. The actual <code>gardenlet</code> Pods run on the runtime cluster or another Kubernetes cluster not managed by Gardener. Typically, this is referred to as an <strong>unmanaged</strong> Seed and is considered part of the Gardener infrastructure. In this setup, the very first <code>Seed</code> will be reserved for one or several &quot;infrastructure&quot; <code>Shoot</code>s. Those will be turned into <code>Seed</code>s again through a <code>ManagedSeed</code> resource. These <strong>Gardener-managed</strong> <code>Seed</code>s will then host control planes of any users&#39; <code>Shoot</code> clusters.</p><p><img src="'+t+'" alt="Gardener Setup"></p><p>Reference documentation:</p><ul><li><a href="https://gardener.cloud/docs/getting-started/architecture/" target="_blank" rel="noreferrer">Getting Started</a></li></ul><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><h3 id="runtime-cluster" tabindex="-1">Runtime Cluster <a class="header-anchor" href="#runtime-cluster" aria-label="Permalink to &quot;Runtime Cluster&quot;">​</a></h3><p>In order to install and run Gardener an already existing Kubernetes cluster is required. It serves as the root cluster hosting all the components required for the virtual Garden cluster - like a <code>kube-apiserver</code> and <code>etcd</code> but also admission webhooks or the <code>gardener-controller-manager</code>.</p><p>Reference documentation:</p><ul><li><a href="/docs/gardener/concepts/architecture/">Gardener Architecture</a></li><li><a href="https://github.com/gardener/gardener/tree/master/docs#concepts" target="_blank" rel="noreferrer">Gardener concepts</a></li></ul><p>In this example, the runtime cluster is also used to host the very first <code>gardenlet</code>, which will register this cluster as a <code>Seed</code> as well. The <code>gardenlet</code> can be deployed to another Kubernetes cluster (recommended for productive setups). In this example, the runtime cluster is reused which keeps the amount of unmanaged clusters at a bare minimum.</p><h3 id="dns-zone" tabindex="-1">DNS Zone <a class="header-anchor" href="#dns-zone" aria-label="Permalink to &quot;DNS Zone&quot;">​</a></h3><p>The virtual Garden API endpoint (<code>kube-apiserver</code>) is exposed through an Istio <code>Gateway</code>. This in turn is reachable via a LoadBalancer <code>Service</code>. The IP address is made discoverable through DNS. Hence, a zone where an <code>A</code> record can be created is required.</p><p>Additionally, Gardener advertises <code>kube-apiservers</code> of <code>Shoots</code> through two DNS records, which requires at least one DNS zone and credentials to interact with it through automation.</p><p>Assuming the base domain for a Gardener landscape is <code>crazy-botany.gardener.cloud</code>, the following example shows a possible way to structure DNS records:</p><table tabindex="0"><thead><tr><th style="text-align:left;">Component</th><th style="text-align:left;">General</th><th style="text-align:left;">Example</th></tr></thead><tbody><tr><td style="text-align:left;">Gardener Base</td><td style="text-align:left;">gardener.&lt;base-domain&gt;</td><td style="text-align:left;">gardener.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Virtual Garden</td><td style="text-align:left;">api.garden.&lt;base-domain&gt;</td><td style="text-align:left;">api.garden.gardener.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Gardener Ingress</td><td style="text-align:left;">ingress.garden&lt;gardener-base-domain&gt;</td><td style="text-align:left;">ingress.garden.gardener.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Gardener Dashboard</td><td style="text-align:left;">dashboard.ingress.&lt;gardener-base-domain&gt;</td><td style="text-align:left;">dashboard.ingress.garden.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Gardener Discovery</td><td style="text-align:left;">discovery.ingress.&lt;gardener-base-domain&gt;</td><td style="text-align:left;">discovery.ingress.garden.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Shoot Internal</td><td style="text-align:left;">internal.&lt;gardener-base-domain&gt;</td><td style="text-align:left;">internal.gardener.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Shoot (default) External</td><td style="text-align:left;">shoot.&lt;gardener-base-domain&gt;</td><td style="text-align:left;">shoot.gardener.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Unmanaged Seed Ingress</td><td style="text-align:left;">ingress.soil.&lt;gardener-base-domain&gt;</td><td style="text-align:left;">ingress.soil.gardener.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Managed Seed</td><td style="text-align:left;">&lt;seed-name&gt;.seed.&lt;gardener-base-domain&gt;</td><td style="text-align:left;">cc-ha.seed.gardener.crazy-botany.gardener.cloud</td></tr><tr><td style="text-align:left;">Managed Seed Ingress</td><td style="text-align:left;">ingress.&lt;seed-name&gt;.seed.&lt;gardener-base-domain&gt;</td><td style="text-align:left;">ingress.cc-ha.seed.gardener.crazy-botany.gardener.cloud</td></tr></tbody></table><p>Reference documentation:</p><ul><li><a href="/docs/gardener/configuration/#system-configuration">Gardener Configuration</a></li><li><a href="/docs/gardener/extensions/resources/dnsrecord/">DNS records</a></li></ul><h3 id="certificates" tabindex="-1">Certificates <a class="header-anchor" href="#certificates" aria-label="Permalink to &quot;Certificates&quot;">​</a></h3><p>Some components of a Gardener landscape require TLS certificates signed by a well-known, trusted certificate authority (CA). While it is certainly possible to provide certificates manually, using an ACME service is much more convenient and recommended. Utilizing the <a href="https://github.com/gardener/gardener-extension-shoot-cert-service" target="_blank" rel="noreferrer">Gardener extension for certificate services</a> allows automating the creation and renewal of certificates for the Gardener landscape.</p><h3 id="backup-bucket" tabindex="-1">Backup Bucket <a class="header-anchor" href="#backup-bucket" aria-label="Permalink to &quot;Backup Bucket&quot;">​</a></h3><p>The virtual Garden cluster&#39;s <code>etcd</code> is governed by <a href="https://github.com/gardener/etcd-druid" target="_blank" rel="noreferrer">etcd-druid</a>. If configured, backups are created continuously and stored to a supported object store. This requires credentials to manage an object store on the chosen infrastructure. It is recommended for any productive installation of Gardener.</p><h3 id="infrastructure" tabindex="-1">Infrastructure <a class="header-anchor" href="#infrastructure" aria-label="Permalink to &quot;Infrastructure&quot;">​</a></h3><p>For each infrastructure supported by Gardener, a so-called <strong>provider-extension</strong> exists. It implements the required interfaces. For this example, the <a href="https://github.com/gardener/gardener-extension-provider-openstack" target="_blank" rel="noreferrer">OpenStack extension</a> will be used. Of course, a single Gardener landscape can support multiple infrastructures, which is a common use case. In this case, the respective provider-extensions need to be deployed as well.</p><p>Access to the respective infrastructure is required and needs to be handed over to Gardener in the provider-specific format (e.g., OpenStack application credentials).</p><p>Reference documentation:</p><ul><li><a href="/docs/gardener/#extensions">Gardener extensibility</a></li><li><a href="https://github.com/gardener/gardener-extension-provider-openstack/tree/master/docs" target="_blank" rel="noreferrer">Provider OpenStack</a></li></ul><h2 id="configure-and-deploy-components" tabindex="-1">Configure and deploy components <a class="header-anchor" href="#configure-and-deploy-components" aria-label="Permalink to &quot;Configure and deploy components&quot;">​</a></h2><p>This section focuses on the individual building blocks of a Gardener landscape and their deployment / options.</p><h3 id="gardener-operator" tabindex="-1">Gardener Operator <a class="header-anchor" href="#gardener-operator" aria-label="Permalink to &quot;Gardener Operator&quot;">​</a></h3><p>The Gardener Operator is provided as a <a href="https://github.com/gardener/gardener/tree/master/charts/gardener/operator" target="_blank" rel="noreferrer">helm chart</a>, which is also published as an OCI artifact and attached to each release of the <a href="https://github.com/gardener/gardener/releases" target="_blank" rel="noreferrer">gardener/gardener</a> repository.</p><p>When setting up a new Gardener landscape, choose the latest version and either install the chart or render the templates e.g.:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./charts/gardener/operator</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> garden</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> replicaCount=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image.tag=v1.125.0</span></span></code></pre></div><p>Reference documentation:</p><ul><li><a href="/docs/gardener/concepts/operator/">Gardener Operator</a></li></ul><h3 id="extensions" tabindex="-1">Extensions <a class="header-anchor" href="#extensions" aria-label="Permalink to &quot;Extensions&quot;">​</a></h3><p>Gardener is provider-agnostic and relies on a growing set of extensions. An extension can provide support for an infrastructure (required) or add a desired feature to a Kubernetes cluster (often optional).</p><p>There are a few extensions considered essential to any Gardener installation:</p><ul><li>at least one <a href="/docs/extensions/#infrastructure-provider">infrastructure provider</a> (commonly referred to as provider-extension)</li><li>at least one <a href="/docs/extensions/#operating-system">operating system extension</a> - <a href="https://github.com/gardener/gardener-extension-os-gardenlinux" target="_blank" rel="noreferrer">Garden Linux</a> is recommended</li><li>at least one <a href="/docs/extensions/#network-plugin">network plugin (CNI)</a></li><li>Shoot services</li></ul><p>An extension commonly consists of two components – a controller implementing the Gardener&#39;s extension contract and an admission controller. The latter is deployed to the runtime cluster and prevents misconfiguration of <code>Shoot</code>s. While an extension&#39;s primary purpose is to implement functionality for <code>Shoot</code> clusters, it can also be deployed to the runtime cluster to provide additional functionality like managing <code>DNSRecord</code>s or <code>BackupBucket</code>s using the well-known and proven code paths.</p><h4 id="choices" tabindex="-1">Choices <a class="header-anchor" href="#choices" aria-label="Permalink to &quot;Choices&quot;">​</a></h4><p>For this example, the following choices are made:</p><ul><li><a href="https://github.com/gardener/gardener-extension-os-gardenlinux" target="_blank" rel="noreferrer">Garden Linux OS extension</a></li><li><a href="https://github.com/gardener/gardener-extension-provider-openstack" target="_blank" rel="noreferrer">Provider OpenStack</a></li><li><a href="https://github.com/gardener/gardener-extension-networking-calico" target="_blank" rel="noreferrer">Calico</a></li><li><a href="https://github.com/gardener/gardener-extension-shoot-dns-service" target="_blank" rel="noreferrer">DNS service</a></li><li><a href="https://github.com/gardener/gardener-extension-shoot-cert-service" target="_blank" rel="noreferrer">Cert service</a></li><li><a href="https://github.com/gardener/gardener-extension-shoot-oidc-service" target="_blank" rel="noreferrer">OIDC service</a></li></ul><p>Reference documentation:</p><ul><li><a href="/docs/gardener/extensions/resources/extension/#contract-extension-resource">Extension Contract</a></li><li><a href="https://github.com/gardener/gardener/blob/master/docs/proposals/01-extensibility.md" target="_blank" rel="noreferrer">GEP 01 Extensibility</a></li><li><a href="/docs/extensions/#known-extension-implementations">Extension Library</a></li></ul><h4 id="how-to-install-an-extension" tabindex="-1">How to install an extension <a class="header-anchor" href="#how-to-install-an-extension" aria-label="Permalink to &quot;How to install an extension&quot;">​</a></h4><p>An extension is commonly described by an <code>Extension</code> resource (API group <code>operator.gardener.cloud/v1alpha1</code>) in the runtime cluster. The Gardener Operator will take care of deploying the required resources both to the runtime and to the virtual Garden cluster. More details can be found in the <a href="/docs/gardener/concepts/operator/#extension-resource">Extension Resource documentation</a>.</p><p>Typically, only a few extensions are needed on the runtime cluster, and the Gardener Operator manages them directly through <code>ManagedResource</code>s. Most of the extensions, however, are registered to the virtual Garden cluster and then installed onto the <code>Seed</code>s.</p><p>To make an extension known to the <code>Garden</code>, the Gardener Operator translates the <code>Extension</code> into two resources and applies them to the virtual Garden cluster – firstly, a <code>ControllerDeployment</code> and secondly, a matching <code>ControllerRegistration</code>. With both in place, Gardener-managed <code>ControllerInstallation</code>s take care of the actual deployment of the extension to the target environment.</p><p>Check the <a href="/docs/gardener/extensions/registration/">extension registration documentation</a> for more details.</p><p>The <code>ControllerRegistration</code> is also a useful resource to check, as it declares which resources it implements. An example of such a <code>ControllerRegistration</code> can be found in the <a href="https://github.com/gardener/gardener-extension-provider-openstack" target="_blank" rel="noreferrer">provider OpenStack</a> extension&#39;s <a href="https://github.com/gardener/gardener-extension-provider-openstack/blob/master/example/controller-registration.yaml" target="_blank" rel="noreferrer">example file</a>.</p><p><img src="'+r+`" alt="extensions"></p><h3 id="garden" tabindex="-1">Garden <a class="header-anchor" href="#garden" aria-label="Permalink to &quot;Garden&quot;">​</a></h3><p>The Gardener Operator reconciles the so-called <code>Garden</code> resource, which contains a detailed configuration of the Garden landscape to be created. Specify the domain name for the Garden&#39;s API endpoint, CIDR blocks for the virtual cluster, high availability, and other options here. To get familiar with the available options, check the <a href="https://github.com/gardener/gardener/blob/master/example/operator/20-garden.yaml" target="_blank" rel="noreferrer">Garden example</a>.</p><p>While most operations are carried out in the realm of the runtime cluster, two external services are required. To automate both the creation of <code>DNSRecord</code>s and a <code>BackupBucket</code>, a provider-extension needs to be deployed to the runtime cluster as well. To facilitate the extension&#39;s deployment, the API group <code>operator.gardener.cloud/v1alpha1</code> contains an <code>Extension</code> resources, which is reconciled by the Gardener Operator. Such an <code>Extension</code> resource specifies how to install it into the runtime cluster, as well as the virtual Garden cluster. More details can be found in the <a href="/docs/gardener/deployment/setup_gardener/#extensions">Extensions section</a>.</p><p>The below example shows how an <code>Extension</code> is used to deploy the provider-extension for OpenStack. Please note, it advertises to support resources of <code>kind: BackupBucket</code> and <code>type: openstack</code> as well as <code>kind: DNSrecord</code> and <code>type: openstack-designate</code>.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">operator.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Extension</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">provider-openstack</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  deployment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    admission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      runtimeCluster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        helm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          ociRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">europe-docker.pkg.dev/gardener-project/releases/charts/gardener/extensions/admission-openstack-runtime</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.44.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        replicaCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      virtualCluster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        helm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          ociRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">europe-docker.pkg.dev/gardener-project/releases/charts/gardener/extensions/admission-openstack-application</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.44.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    extension</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      helm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        ociRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">europe-docker.pkg.dev/gardener-project/releases/charts/gardener/extensions/provider-openstack</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.44.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      runtimeClusterValues</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        vpa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          resourcePolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            minAllowed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">128Mi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          updatePolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            updateMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Recreate</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        replicaCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          requests</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30m</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256Mi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      injectGardenKubeconfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupBucket</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupEntry</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Bastion</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ControlPlane</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Infrastructure</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Worker</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DNSRecord</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack-designate</span></span></code></pre></div><p>If needed, a pull secret can be referenced for the Helm charts.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">operator.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Extension</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    deployment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        helm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          ociRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            pullSecretRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-pull-secret</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Secret</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-pull-secret</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">garden</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gardener.cloud/role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">helm-pull-secret</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kubernetes.io/dockerconfigjson</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  .dockerconfigjson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;base64-encoded-docker-config-json&gt;</span></span></code></pre></div><p>To make use of the automated DNS management, the <code>Garden</code> resource has to contain a primary provider. Here is an example for an OpenStack-based setup, where the actual credentials are stored in the referenced <code>Secret</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">primary</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack-designate</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    secretRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dns-showroom-garden</span></span></code></pre></div><p>Additionally, the <code>BackupBucket</code> and credentials to access it are configured alongside. The easiest way to get started is by using and customizing the example linked below.</p><p>To further simplify both installation and operations, it is recommended to deploy the certificate service extension to the runtime cluster as well. Follow this <a href="https://github.com/gardener/gardener-extension-shoot-cert-service/blob/master/example/extension.yaml" target="_blank" rel="noreferrer">example</a> to add a default issuer to the runtime cluster and request the extension to be deployed to where needed. Next, expand the <code>Garden</code> resource&#39;s <a href="/docs/extensions/others/gardener-extension-shoot-cert-service/deployment/#providing-trusted-tls-certificate-for-garden-runtime-cluster">configuration</a> to use the extension:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  extensions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">controlplane-cert-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    providerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">service.cert.extensions.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CertConfig</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      generateControlPlaneCertificate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p><img src="`+l+`" alt="Garden"></p><p>Upon the first reconciliation of the <code>Garden</code> resource, a Kubernetes control plane will be bootstrapped in the <code>garden</code> namespace. <code>etcd-main</code> and <code>etcd-events</code> are managed by <a href="https://github.com/gardener/etcd-druid" target="_blank" rel="noreferrer">etcd-druid</a> and use the <code>BackupBucket</code> created by the provider-extension. To be able to serve any Gardener resource, the <code>gardener-apiserver</code> is deployed and registered through an <code>APIService</code> resource with the <code>kube-apiserver</code> of the virtual Garden cluster. Components like <code>gardener-scheduler</code> and <code>gardener-controller-manager</code> are deployed to act on Gardener&#39;s resources.</p><p>Once the <code>Garden</code> resource reports readiness, the virtual Garden cluster can be targeted.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> garden</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crazy-botany</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          K8S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   GARDENER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VERSION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   LAST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OPERATION</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   RUNTIME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   VIRTUAL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SERVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   OBSERVABILITY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   AGE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crazy-botany</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1.31.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        v1.110.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           Succeeded</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        True</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      True</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      True</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         True</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            1d</span></span></code></pre></div><p>In case the automatic DNS record creation is not supported, a record with the external address of the <code>istio-ingressgateway</code> (found in namespace <code>virtual-garden-istio-ingress</code>) service has to be created manually.</p><p>To obtain credentials and interact with the virtual Garden cluster, please follow this <a href="/docs/gardener/concepts/operator/#virtual-garden-kubeconfig">guide</a>.</p><p>Reference documentation and examples:</p><ul><li><a href="https://github.com/gardener/gardener/blob/master/example/operator/20-garden.yaml" target="_blank" rel="noreferrer">Garden configuration example</a></li><li>Backup secret examples <ul><li><a href="https://github.com/gardener/gardener-extension-provider-alicloud/blob/master/example/30-etcd-backup-secret.yaml" target="_blank" rel="noreferrer">Alicloud</a></li><li><a href="https://github.com/gardener/gardener-extension-provider-aws/blob/master/example/30-etcd-backup-secret.yaml" target="_blank" rel="noreferrer">AWS</a></li><li><a href="https://github.com/gardener/gardener-extension-provider-azure/blob/master/example/30-etcd-backup-secret.yaml" target="_blank" rel="noreferrer">Azure</a></li><li><a href="https://github.com/gardener/gardener-extension-provider-gcp/blob/master/example/30-etcd-backup-secret.yaml" target="_blank" rel="noreferrer">GCP</a></li><li><a href="https://github.com/gardener/gardener-extension-provider-openstack/blob/master/example/30-etcd-backup-secret.yaml" target="_blank" rel="noreferrer">OpenStack</a></li></ul></li><li><a href="/docs/gardener/concepts/operator/#garden-resources">Configuration options</a></li><li><a href="/docs/gardener/concepts/operator/#virtual-garden-kubeconfig">Accessing the virtual Garden</a></li></ul><h3 id="cloud-profile" tabindex="-1">Cloud Profile <a class="header-anchor" href="#cloud-profile" aria-label="Permalink to &quot;Cloud Profile&quot;">​</a></h3><p>In order to host any <code>Shoot</code> cluster, at least one <code>CloudProfile</code> is required. The <code>CloudProfile</code> resource describes supported Kubernetes and OS versions, as well as infrastructure capabilities like regions and their availability zones.</p><p>Hence, the next step is to craft a <code>CloudProfile</code> for each infrastructure provider and combine it with the information where the operating system images can be found. The resulting <code>CloudProfile</code> resource has to be deployed to the virtual Garden cluster.</p><p>The following list provides the high-level steps to build a <code>CloudProfile</code>:</p><ul><li>add at least one supported minor version to <code>.spec.kubernetes.versions[]</code>.</li><li>add at least one region including the availability zone to <code>.spec.regions[]</code>.</li><li>add at least one operating system to <code>.spec.machineImages[]</code> and define at least on supported version.</li><li>add one or several machine types to <code>.spec.machineTypes[]</code>.</li><li>specify a <code>.spec.providerConfig</code> according to the extension&#39;s documentation. Typically, this includes a list of <code>MachineImages</code>. Garden Linux, for example, publishes images and provides a list of location as part of the release notes. In case of private infrastructure, copying the images might be required.</li></ul><p>Here is a simplified example manifest:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">core.gardener.cloud/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CloudProfile</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack-example</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  caBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # CA Bundle installed on all nodes of the shoot clusters using this CloudProfile</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &lt;redacted&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  kubernetes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    versions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">classification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">preview</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.31.3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">classification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">supported</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      expirationDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-07-30T23:59:59Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.31.2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  machineImages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gardenlinux</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    updateStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">minor</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    versions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">architectures</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">amd64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">arm64</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      classification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">supported</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      cri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">containerRuntimes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gvisor</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">containerd</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1592.3.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  machineTypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">architecture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">amd64</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4Gi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">small_machine</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    storage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">standard</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">64Gi</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    usable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  regions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-region-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    zones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-region-1a</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-region-1b</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  providerConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openstack.provider.extensions.gardener.cloud/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CloudProfileConfig</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    machineImages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gardenlinux</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      versions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1592.3.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        regions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">abcd-1234</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # The ID of the image in the given OpenStack installation for the specified region.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-region-1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ...</span></span></code></pre></div><p>Reference documentation:</p><ul><li><a href="/docs/gardener/concepts/apiserver/#cloudprofiles"><code>CloudProfile</code>s</a></li><li><a href="https://github.com/gardener/gardener/blob/master/example/30-cloudprofile.yaml" target="_blank" rel="noreferrer"><code>CloudProfile</code> example</a></li><li><a href="/docs/extensions/infrastructure-extensions/gardener-extension-provider-openstack/operations/">OpenStack <code>CloudProfile</code> example</a></li><li><a href="https://github.com/gardenlinux/gardenlinux/releases/tag/1592.3" target="_blank" rel="noreferrer">Garden Linux release notes example</a></li><li><a href="/docs/gardener/deployment/image_vector/">Image vector</a></li><li><a href="https://github.com/gardener/gardener/blob/master/imagevector/containers.yaml" target="_blank" rel="noreferrer">Image vector container defaults</a></li></ul><h3 id="dns-setup-for-internal-external-domains" tabindex="-1">DNS setup for internal &amp; external domains <a class="header-anchor" href="#dns-setup-for-internal-external-domains" aria-label="Permalink to &quot;DNS setup for internal &amp; external domains&quot;">​</a></h3><p>Gardener maintains DNS records for a <code>Shoot</code> which requires a DNS zone and credentials to manage records in this zone. Provide the credentials alongside with information about the zone. The secrets are deployed to the virtual Garden cluster.</p><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p>The preferred way to configure domain settings is by explicitly setting them through the <a href="https://github.com/gardener/gardener/blob/master/example/50-seed.yaml" target="_blank" rel="noreferrer"><code>Seed</code> API</a>:</p><ul><li>internal domain can be configured through see <code>.spec.dns.internal</code></li><li>default domains can be configured through see <code>.spec.dns.defaults</code></li></ul></div><p>Reference documentation:</p><ul><li><a href="/docs/gardener/extensions/resources/dnsrecord/#what-does-gardener-create-dns-records-for"><code>DNSRecord</code>s</a></li><li><a href="https://github.com/gardener/gardener/blob/master/example/10-secret-default-domain.yaml" target="_blank" rel="noreferrer">Default domain example</a></li><li><a href="https://github.com/gardener/gardener/blob/master/example/10-secret-internal-domain.yaml" target="_blank" rel="noreferrer">Internal domain example</a></li></ul><h3 id="gardenlet" tabindex="-1">Gardenlet <a class="header-anchor" href="#gardenlet" aria-label="Permalink to &quot;Gardenlet&quot;">​</a></h3><p>Before the first <code>Shoot</code> can be created in a new Gardener landscape, at least one <code>Seed</code> is required. Typically, the very first <code>Seed</code> is created by deploying a properly configured <code>gardenlet</code> to an existing Kubernetes cluster. In this example, the <code>gardenlet</code> will be deployed to the runtime cluster - effectively turning it into a <code>Seed</code> as well. Thus, the runtime cluster serves two purposes now - it hosts the virtual Garden cluster and control planes. It is possible, and strongly recommended for larger installations, to deploy a <code>gardenlet</code> to another Kubernetes cluster. This separates the virtual Garden cluster from the first <code>Seed</code> with the control planes hosted there.</p><p>A <code>Seed</code> requires a provider-extension matching the target infrastructure to manage <code>DNSRecord</code>s for the <code>Seed</code>&#39;s ingress domain and if configured, the <code>BackupBucket</code>. A <code>Secret</code> with the credentials to interact with the infrastructure needs to be created in the virtual Garden cluster and linked in the <code>gardenlet</code>&#39;s configuration.</p><p>The easiest way to deploy a <code>gardenlet</code> is to create a <code>Gardenlet</code> resource in the virtual Garden cluster. Make sure to configure the CIDR blocks properly to avoid conflicts or overlaps with the runtime cluster.</p><p><img src="`+h+`" alt="gardenlet"></p><p>A common pattern is to protect this very first <code>Seed</code>, in a sense that no control planes of user <code>Shoot</code> clusters will be scheduled to it. Instead, this <code>Seed</code> should host control planes of Gardener-managed <code>Seed</code> clusters exclusively. These in turn host the control planes of user <code>Shoot</code>s. This pattern allows to scale out the capacity of a Gardener landscape, as creating new seeds is simple and fast. More details can be found in the <a href="/docs/gardener/deployment/setup_gardener/#shoot--managed-seed">Shoot &amp; Managed Seed section</a>.</p><p>To achieve this protection, the <code>gardenlet</code> resource should contain the following configuration:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    seedConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        taints</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seed.gardener.cloud/protected</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        settings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          scheduling</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            visible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><p>Reference documentation:</p><ul><li><a href="/docs/gardener/concepts/gardenlet/">Gardenlet documentation</a></li><li><a href="/docs/gardener/deployment/deploy_gardenlet/">Deploying a Gardenlet</a></li><li><a href="https://github.com/gardener/gardener/blob/master/example/55-gardenlet.yaml" target="_blank" rel="noreferrer">Gardenlet example</a></li><li><a href="https://github.com/gardener/gardener/blob/master/example/20-componentconfig-gardenlet.yaml" target="_blank" rel="noreferrer">Gardenlet configuration example</a></li></ul><h3 id="shoot-managed-seed" tabindex="-1">Shoot &amp; Managed Seed <a class="header-anchor" href="#shoot-managed-seed" aria-label="Permalink to &quot;Shoot &amp; Managed Seed&quot;">​</a></h3><p>With the very first <code>Seed</code> in place, the Gardener landscape can scale by the means of Gardener-managed infrastructure. To get started, a <code>Shoot</code> needs to be created in the virtual Garden cluster. This requires infrastructure credentials to be provided in the form of a <code>Secret</code> and <code>CredentialsBinding</code>. This <code>Shoot</code> should have a <code>toleration</code> for the above <code>taint</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tolerations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seed.gardener.cloud/protected</span></span></code></pre></div><p>Up next, a <code>gardenlet</code> has to be installed on to this <code>Shoot</code> and it needs to be registered as a <code>Seed</code>. The recommended way is to create a <code>ManagedSeed</code> resource in the virtual Garden. The configuration for the <code>Seed</code> needs to be crafted carefully to avoid overlapping CIDR ranges etc.</p><p><img src="`+p+'" alt="managed seed"></p><p>Reference documentation:</p><ul><li><a href="/docs/gardener/managed_seed/">Managed Seeds</a></li></ul><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>Setting up a new Gardener landscape is much easier today - thanks to the evolution of the Gardener Operator and <code>Garden</code> resource. Utilizing the <code>Extension</code> resource reduces manual efforts significantly. A single Gardener landscape can support multiple infrastructures for <code>Shoots</code>. To onboard an infrastructure, the relevant extensions need to be deployed as well.</p><p>Due to the vast amount of configuration options it is highly recommended to spend some time to derive a meaningful setup initially.</p><p>In this example, the runtime cluster serves two purposes - it hosts the virtual Garden cluster and runs a <code>gardenlet</code> which registers the runtime cluster itself as a seed with the virtual Garden cluster. This first seed is reserved to host the control planes of &quot;infrastructure&quot; <code>Shoot</code>s only. Those <code>Shoot</code>s will be turned into seeds using the <code>ManagedSeed</code> resource and allow for proper scaling.</p><p>To get started with Gardener, visit our <a href="https://gardener.cloud" target="_blank" rel="noreferrer">landing page</a> and try the <a href="https://demo.gardener.cloud/" target="_blank" rel="noreferrer">demo environment</a>.</p>',114)]))}const f=s(d,[["render",o]]);export{m as __pageData,f as default};

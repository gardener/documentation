import{_ as e,c as i,o as a,a2 as t}from"./chunks/framework.Bfq10Vlj.js";const k=JSON.parse('{"title":"Access Restrictions","description":"","frontmatter":{"aliases":["/docs/gardener/access_restrictions/"],"github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/usage/shoot","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/shoot/access_restrictions.md","to":"access_restrictions.md"},"persona":"Users","title":"Access Restrictions","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/shoot/access_restrictions/index.md","filePath":"docs/gardener/shoot/access_restrictions.md","lastUpdated":null}'),o={name:"docs/gardener/shoot/access_restrictions/index.md"};function n(c,s,r,l,h,d){return a(),i("div",null,s[0]||(s[0]=[t(`<h1 id="access-restrictions" tabindex="-1">Access Restrictions <a class="header-anchor" href="#access-restrictions" aria-label="Permalink to &quot;Access Restrictions&quot;">​</a></h1><p>Access restrictions can be configured in the <code>CloudProfile</code>, <code>Seed</code>, and <code>Shoot</code> APIs. They can be used to implement access restrictions for seed and shoot clusters (e.g., if you want to ensure &quot;EU access&quot;-only or similar policies).</p><h2 id="cloudprofile" tabindex="-1"><code>CloudProfile</code> <a class="header-anchor" href="#cloudprofile" aria-label="Permalink to &quot;\`CloudProfile\`&quot;">​</a></h2><p>The <code>.spec.regions</code> list contains all regions that can be selected by <code>Shoot</code>s. Operators can configure them with a list of access restrictions that apply for each region, for example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  regions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">europe-central-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    accessRestrictions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eu-access-only</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">us-west-1</span></span></code></pre></div><p>This configuration means that <code>Shoot</code>s selecting the <code>europe-central-1</code> region <strong>can</strong> configure an <code>eu-access-only</code> access restriction. <code>Shoot</code>s running in other regions cannot configure this access restriction in their specification.</p><h2 id="seed" tabindex="-1"><code>Seed</code> <a class="header-anchor" href="#seed" aria-label="Permalink to &quot;\`Seed\`&quot;">​</a></h2><p>The <code>Seed</code> specification also allows to configure access restrictions that apply for this specific seed cluster, for example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  accessRestrictions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eu-access-only</span></span></code></pre></div><p>This configuration means that this seed cluster can host shoot clusters that also have the <code>eu-access-only</code> access restriction. In addition, this seed cluster can also host shoot clusters without any access restrictions at all.</p><h2 id="shoot" tabindex="-1"><code>Shoot</code> <a class="header-anchor" href="#shoot" aria-label="Permalink to &quot;\`Shoot\`&quot;">​</a></h2><p>If the <code>CloudProfile</code> allows to configure access restrictions for the selected <code>.spec.region</code> in the <code>Shoot</code> (see <a href="/docs/gardener/shoot/access_restrictions/#cloudprofile">above</a>), then they can also be provided in the specification of the <code>Shoot</code>, for example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">europe-central-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  accessRestrictions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eu-access-only</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   options:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     support.gardener.cloud/eu-access-for-cluster-addons: &quot;false&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#     support.gardener.cloud/eu-access-for-cluster-nodes: &quot;true&quot;</span></span></code></pre></div><p>In addition, it is possible to specify arbitrary options (key-value pairs) for the access restriction. These options are not interpreted by Gardener, but can be helpful when evaluated by other tools (e.g., <a href="https://github.com/gardener/gardenctl-v2" target="_blank" rel="noreferrer"><code>gardenctl</code></a> implements some of them).</p><p>Above configuration means that the <code>Shoot</code> shall only be accessible by operators in the EU. When configured for</p><ul><li>a newly created <code>Shoot</code>, <code>gardener-scheduler</code> will automatically filter for <code>Seed</code>s also supporting this access restriction. All other <code>Seed</code>s are not considered for scheduling.</li><li>an existing <code>Shoot</code>, <code>gardener-apiserver</code> will allow removing access restrictions, but adding them is only possible if the currently selected <code>Seed</code> supports them. If it does not support them, the <code>Shoot</code> must first be migrated to another eligible <code>Seed</code> before they can be added.</li><li>an existing <code>Shoot</code> that is migrated, <code>gardener-apiserver</code> will only allow the migration in case the targeted <code>Seed</code> also supports the access restrictions configured on the <code>Shoot</code>.</li></ul><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p>There is no technical enforcement of these access restrictions - they are purely informational. Hence, it is the responsibility of the operator to ensure that they enforce the configured access restrictions.</p></div>`,17)]))}const g=e(o,[["render",n]]);export{k as __pageData,g as default};

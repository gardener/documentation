import{_ as t,c as a,o,a2 as i}from"./chunks/framework.Bfq10Vlj.js";const u=JSON.parse('{"title":"New Emergency Brake for Gardener Shoot Reconciliations","description":"","frontmatter":{"aliases":["/blog/2025/08/27/new-emergency-brake-for-gardener-shoot-reconciliations"],"authors":[{"avatar":"https://avatars.githubusercontent.com/LucaBernstein","login":"LucaBernstein","name":"Luca Bernstein"}],"github_repo":"https://github.com/gardener/documentation","github_subdir":"website/blog/2025/08","linkTitle":"New Emergency Brake for Gardener Shoot Reconciliations","newsSubtitle":"August 27, 2025","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/blog/2025/08/08-27-new-emergency-brake-for-gardener-shoot-reconciliations.md","to":"08-27-new-emergency-brake-for-gardener-shoot-reconciliations.md"},"publishdate":"2025-08-27","title":"New Emergency Brake for Gardener Shoot Reconciliations"},"headers":[],"relativePath":"blog/2025/08/08-27-new-emergency-brake-for-gardener-shoot-reconciliations/index.md","filePath":"blog/2025/08/08-27-new-emergency-brake-for-gardener-shoot-reconciliations.md","lastUpdated":null}'),n={name:"blog/2025/08/08-27-new-emergency-brake-for-gardener-shoot-reconciliations/index.md"};function r(s,e,c,l,d,h){return o(),a("div",null,e[0]||(e[0]=[i('<h1 id="new-emergency-brake-for-gardener-shoot-reconciliations" tabindex="-1">New Emergency Brake for Gardener Shoot Reconciliations <a class="header-anchor" href="#new-emergency-brake-for-gardener-shoot-reconciliations" aria-label="Permalink to &quot;New Emergency Brake for Gardener Shoot Reconciliations&quot;">​</a></h1><p>In large-scale Kubernetes landscapes, ensuring stability during updates is paramount. A faulty configuration or update can propagate quickly, potentially impacting numerous clusters. To provide operators with a powerful tool to mitigate such risks, Gardener has introduced an emergency stop mechanism for <code>Shoot</code> reconciliations.</p><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h3><p>Operators can now temporarily halt all reconciliation activities for <code>Shoot</code> clusters on a specific <code>Seed</code> by applying a simple annotation. This acts as an emergency brake, preventing further changes from being rolled out to the clusters managed by that <code>Seed</code>.</p><p>To activate the emergency stop for a <code>Seed</code>, apply the following annotation:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> annotate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seed-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shoot.gardener.cloud/emergency-stop-reconciliations=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>In a critical situation where you need to stop reconciliations across your entire landscape, you can annotate all <code>Seed</code> resources at once:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> annotate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shoot.gardener.cloud/emergency-stop-reconciliations=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><h3 id="effects-of-the-emergency-stop" tabindex="-1">Effects of the Emergency Stop <a class="header-anchor" href="#effects-of-the-emergency-stop" aria-label="Permalink to &quot;Effects of the Emergency Stop&quot;">​</a></h3><p>When the <code>shoot.gardener.cloud/emergency-stop-reconciliations=true</code> annotation is active on a <code>Seed</code>, the following effects take place:</p><ul><li><strong>Paused Reconciliations:</strong> The <code>Shoot</code> controller will not reconcile any existing <code>Shoot</code> clusters managed by the annotated <code>Seed</code>. This effectively freezes the clusters in their current state, preventing any new, potentially harmful, updates from being applied.</li><li><strong>Scheduling Prevention:</strong> The Gardener scheduler will not assign new <code>Shoot</code> clusters to the affected <code>Seed</code>.</li><li><strong>Status Indication:</strong> A new condition, <code>EmergencyStopShootReconciliations</code>, will be added to the <code>Seed</code>&#39;s status. This provides clear visibility that the emergency stop is active.</li></ul><h3 id="resuming-operations" tabindex="-1">Resuming Operations <a class="header-anchor" href="#resuming-operations" aria-label="Permalink to &quot;Resuming Operations&quot;">​</a></h3><p>To resume normal operations, you can simply remove the annotation or set its value to <code>false</code>.</p><p>It is important to note that once the annotation is removed, <code>Shoot</code> clusters are <strong>not</strong> reconciled immediately. Instead, reconciliation will resume for each cluster during its next regularly scheduled reconciliation window. This prevents a sudden &quot;thundering herd&quot; of reconciliations and allows for a controlled return to normal operations.</p><h3 id="a-word-of-caution" tabindex="-1">A Word of Caution <a class="header-anchor" href="#a-word-of-caution" aria-label="Permalink to &quot;A Word of Caution&quot;">​</a></h3><p>This feature is designed strictly for emergency situations to prevent widespread issues. It should be used with care and not as part of regular operational procedures, as pausing reconciliations for extended periods can lead to clusters becoming stale and out of sync.</p><h3 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">​</a></h3><ul><li><a href="https://youtu.be/K15fRoS2WVs?t=783" target="_blank" rel="noreferrer">Watch the recording</a></li><li><a href="https://github.com/gardener/gardener/pull/12712" target="_blank" rel="noreferrer">GitHub Pull Request #12712</a></li></ul>',18)]))}const g=t(n,[["render",r]]);export{u as __pageData,g as default};

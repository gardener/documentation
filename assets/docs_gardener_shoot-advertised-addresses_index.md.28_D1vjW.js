import{_ as e,c as a,o as i,a2 as t}from"./chunks/framework.Bfq10Vlj.js";const k=JSON.parse('{"title":"Shoot Advertised Addresses","description":"","frontmatter":{"github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/development","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/shoot-advertised-addresses.md","to":"shoot-advertised-addresses.md"},"persona":"Developers","title":"Shoot Advertised Addresses","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/shoot-advertised-addresses/index.md","filePath":"docs/gardener/shoot-advertised-addresses.md","lastUpdated":null}'),l={name:"docs/gardener/shoot-advertised-addresses/index.md"};function n(d,s,h,o,r,p){return i(),a("div",null,s[0]||(s[0]=[t(`<h1 id="shoot-advertised-addresses" tabindex="-1">Shoot Advertised Addresses <a class="header-anchor" href="#shoot-advertised-addresses" aria-label="Permalink to &quot;Shoot Advertised Addresses&quot;">â€‹</a></h1><p>Upon reconciliation, the <code>gardenlet</code> populates the list of advertised addresses for the shoot cluster in the <code>.status.advertisedAddresses</code> field of the <code>Shoot</code> resource.</p><p>This list provides endpoints for various services, such as the Kubernetes API server of the shoot, the OIDC service account issuer, etc.</p><p>The example command below shows the list of advertised endpoints for a local shoot cluster.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> garden-local</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shoots</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yaml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> yq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.status.advertisedAddresses&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.local.local.external.local.gardener.cloud</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> internal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.local.local.internal.local.gardener.cloud</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service-account-issuer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://discovery.local.gardener.cloud/projects/local/shoots/41a0cdaa-6ad5-4846-9f6b-b7a7716538cb/issuer</span></span></code></pre></div><p>The <code>external</code>, <code>internal</code> and <code>service-account-issuer</code> endpoints (amongst others) are always present by default for a shoot cluster. Besides these, additional endpoints from the shoot control-plane namespace may be advertised, e.g. observability-related components such as <code>plutono</code>, <code>vali</code>, <code>prometheus</code>, etc.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>As of now, only <code>Ingress</code> resources support may be advertised using this label. In the future, support for <code>Gateway</code> resources will be added as well.</p></div><p>In order to advertise such endpoints, their respective <code>Ingress</code> resource needs to be labeled with <code>endpoint.shoot.gardener.cloud/advertise=true</code>.</p><p>For example, if we want to advertise the <code>plutono</code> endpoint for our local shoot cluster, we would label its respective <code>Ingress</code> resource like this:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shoot--local--local</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ingress</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plutono</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> endpoint.shoot.gardener.cloud/advertise=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>After successful reconciliation of the <code>Shoot</code> by the <code>gardenlet</code>, we should see a new advertised endpoint for our cluster.</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.local.local.external.local.gardener.cloud</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> internal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.local.local.internal.local.gardener.cloud</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service-account-issuer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://discovery.local.gardener.cloud/projects/local/shoots/41a0cdaa-6ad5-4846-9f6b-b7a7716538cb/issuer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ingress/plutono/0/0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://gu-local--local.ingress.local.seed.local.gardener.cloud</span></span></code></pre></div>`,12)]))}const F=e(l,[["render",n]]);export{k as __pageData,F as default};

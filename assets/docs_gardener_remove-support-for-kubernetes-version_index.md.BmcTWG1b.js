import{_ as r,c as t,o as a,a2 as o}from"./chunks/framework.Bfq10Vlj.js";const f=JSON.parse('{"title":"Remove Support For Kubernetes Version","description":"","frontmatter":{"github_repo":"https://github.com/gardener/gardener","github_subdir":"docs/development","params":{"github_branch":"master"},"path_base_for_github_subdir":{"from":"content/docs/gardener/remove-support-for-kubernetes-version.md","to":"remove-support-for-kubernetes-version.md"},"persona":"Developers","title":"Remove Support For Kubernetes Version","prev":false,"next":false},"headers":[],"relativePath":"docs/gardener/remove-support-for-kubernetes-version/index.md","filePath":"docs/gardener/remove-support-for-kubernetes-version.md","lastUpdated":null}'),s={name:"docs/gardener/remove-support-for-kubernetes-version/index.md"};function n(i,e,l,d,u,p){return a(),t("div",null,e[0]||(e[0]=[o('<h1 id="removing-support-for-a-kubernetes-version" tabindex="-1">Removing Support For a Kubernetes Version <a class="header-anchor" href="#removing-support-for-a-kubernetes-version" aria-label="Permalink to &quot;Removing Support For a Kubernetes Version&quot;">​</a></h1><p>This guide describes the typical steps to remove support for a Kubernetes version in the Gardener codebase. Use the referenced PRs for implementation details and examples:</p><ul><li><a href="https://github.com/gardener/gardener/pull/10664" target="_blank" rel="noreferrer">https://github.com/gardener/gardener/pull/10664</a></li><li><a href="https://github.com/gardener/gardener/pull/12486" target="_blank" rel="noreferrer">https://github.com/gardener/gardener/pull/12486</a></li></ul><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">​</a></h2><ul><li>The exact files and field names can vary between Gardener releases. Use the repository search to find the locations in the codebase (examples below).</li></ul><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>As mentioned in <a href="/docs/gardener/new-kubernetes-version/">Adding Support For a New Kubernetes Version</a> - adding support for a new Kubernetes version is a prerequisite for dropping support for versions older than 5 Kubernetes minor versions.</li></ul><h2 id="tasks" tabindex="-1">Tasks <a class="header-anchor" href="#tasks" aria-label="Permalink to &quot;Tasks&quot;">​</a></h2><ul><li>Create an umbrella issue and include a list of all repositories that must be checked out and potentially be modified in order to remove support for the Kubernetes version. (<a href="https://github.com/gardener/gardener/issues/12409" target="_blank" rel="noreferrer">example</a>)</li><li>Research all the deprecations (API, functions, etc) that could be related to the removal of support of the version. (<a href="https://github.com/gardener/gardener/pull/10664#:~:text=What%20this%20PR,config%20(ProtectKernelDefaults%20etc.)" target="_blank" rel="noreferrer">example</a>)</li><li>Adapt the <code>README.md</code> file (remove conformance test results from the table). (<a href="https://github.com/gardener/gardener/pull/12486/commits/16fa4cf56cdf85cf645c3ca1b739607b515669cb" target="_blank" rel="noreferrer">example</a>)</li><li>Update the supported Kubernetes versions in the <a href="https://github.com/gardener/gardener/blob/master/pkg/utils/validation/kubernetesversion/version.go" target="_blank" rel="noreferrer"><code>SupportedVersions</code> variable</a> and in the <a href="/docs/gardener/shoot-operations/supported_k8s_versions/">Supported Kubernetes Versions documentation</a>. (<a href="https://github.com/gardener/gardener/pull/12486/commits/16fa4cf56cdf85cf645c3ca1b739607b515669cb" target="_blank" rel="noreferrer">example</a>)</li><li>Search for the version in codebase. Include all its variants - if it&#39;s 1.33, search for both &quot;1.33&quot; and &quot;133&quot;. If there&#39;s a version-specific logic, adapt it according to the supported versions. <ul><li>The version usages in unit tests and documentation generally should not be adapted unless they contain version-specific logic or features, as per <a href="https://github.com/gardener/gardener/pull/12486#pullrequestreview-3151223952" target="_blank" rel="noreferrer">this discussion</a>.</li><li>The <code>AddedInVersion</code> field in <a href="https://github.com/gardener/gardener/blob/f78a04e2dfbf9fc833a56b3f6ee69c4b7cf0bfee/pkg/utils/validation/features/featuregates.go#L24" target="_blank" rel="noreferrer">Kubernetes feature gate version ranges map</a>, <a href="https://github.com/gardener/gardener/blob/f78a04e2dfbf9fc833a56b3f6ee69c4b7cf0bfee/pkg/utils/validation/apigroups/apigroups.go#L21" target="_blank" rel="noreferrer">Kubernetes API groups version ranges</a>, <a href="https://github.com/gardener/gardener/blob/f78a04e2dfbf9fc833a56b3f6ee69c4b7cf0bfee/pkg/utils/kubernetes/controllers.go#L10" target="_blank" rel="noreferrer">Kubernetes API groups to controllers map</a> and <a href="https://github.com/gardener/gardener/blob/f78a04e2dfbf9fc833a56b3f6ee69c4b7cf0bfee/pkg/utils/validation/admissionplugins/admissionplugins.go#L38" target="_blank" rel="noreferrer">Kubernetes admission plugin version ranges map</a> should not be removed, as it provides valuable historical information about when feature gates, admission plugins, and controllers were introduced.</li></ul></li><li>Remove the images for the version in <code>imagevector/containers.yaml</code>. (<a href="https://github.com/gardener/gardener/pull/12486/commits/3a4e7d00fedbbd242288fda54cfea4dac2486696" target="_blank" rel="noreferrer">example</a>)</li><li>Adapt charts. (<a href="https://github.com/gardener/gardener/pull/10664/commits/a919cec969476d5fa942a84599e536575bf47c93" target="_blank" rel="noreferrer">example</a>)</li><li>Remove upstream conformance test results from kubernetes/test-infra. (<a href="https://github.com/kubernetes/test-infra/pull/35396" target="_blank" rel="noreferrer">example</a>). <ul><li>This should be done only when the corresponding PRs for removal of the version are already merged and released.</li></ul></li></ul>',9)]))}const b=r(s,[["render",n]]);export{f as __pageData,b as default};
